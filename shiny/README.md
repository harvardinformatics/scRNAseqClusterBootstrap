# Visualizing inter and intra-cluster stability
This directory includes a Shiny app that generates plots of any two pair of scRNA-seq analysis outputs derived from **the sample input data**, where each data set is comprised of:

* A Seurat objects stored in an R *rds* file, and
* A tsv file that contains clustering information for boostrap resampling of the original Seurat objects, and clustering data derived from doing clustering on the downsampled data. This file has three columns: clusterid, max_jaccard,bootstrap_number. This data file is generated by the Snakemake workflow found in this repository.

DO NOT use this app to compare files for two different sequencing libraries as such comparisons are meaningless.


The app allows you to select the two methods, and a minimum Jaccard similarity index threshold above which a cluster is considered stable. The app creates a plot of the following: 

* two violin plots, one for each method, describing the number of stable clusters in the boostrapped data (relative to the original clustering data in the Seurat object), and 
* a dashed line indicating the number of stable clusters *between* methods.

The motivation behind this sort of plot is that differences in clustering between methods might be drive by cluster instability in either (or both) methods. If the violin plots sit squarely on top of the dashed line, that suggests that instability drives the observed difference between methods. If both of the violins indicate much greater numbers of stable clusters relative to the number of stable clusters between methods, this indicates the observed difference between methods is not due to cluster instability. There may be intermediate cases where one method has cluster instability and the other does not, indicative that both method-specific instability and a real difference between methods contribute to the lower number of inter-method stable clusters.
 

## Running the app
Put your *.rds* files and boostrap files output by the Snakemake workflow in the *data/* directory. Next,

Launch the app from this directory:

```bash
Rscript -e "shiny::runApp('.')"
```

Or from anywhere using the full path:

```bash
Rscript -e "shiny::runApp('/Users/adamfreedman/workspace/scRNAseqClusterBootstrap/shiny')"
```
